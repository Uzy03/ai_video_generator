{
  "name": "ai-video-dev",

  // ----------------------------------------
  // 1. Dockerfile をビルドに使う
  // ----------------------------------------
  "build": {
    "dockerfile": "Dockerfile"      // ← .devcontainer/Dockerfile の相対パス
  },

  // ----------------------------------------
  // 2. GPU をコンテナへ渡す
  // ----------------------------------------
  "runArgs": ["--gpus", "all"],

  // ----------------------------------------
  // 3. ホスト GPU ドライバ互換ライブラリを注入
  //    （サーバ側 535 系ドライバ → CUDA 12.2）
  // ----------------------------------------
  "features": {
    "ghcr.io/devcontainers/features/nvidia-cuda:1": {
      "version": "12.2.2-devel",
      "install": "toolkit"
    }
  },

  // ----------------------------------------
  // 4. コンテナ作成後に依存を入れるスクリプト
  // ----------------------------------------
  "postCreateCommand": "bash scripts/setup_repo.sh",

  // ----------------------------------------
  // 5. VS Code 拡張など
  // ----------------------------------------
  "customizations": {
    "vscode": {
      "extensions": ["ms-python.python"]
    }
  }
}
